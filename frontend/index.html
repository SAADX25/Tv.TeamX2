<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TeamX2 Chat - ูุญุงุฏุซุฉ TeamX2</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="auth-page">
  <div id="authModal" class="modal active">
    <div class="modal-content glass-card">
      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login">
          <i class="fas fa-sign-in-alt"></i> ุชุณุฌูู ุงูุฏุฎูู
        </button>
        <button class="auth-tab" data-tab="register">
          <i class="fas fa-user-plus"></i> ุฅูุดุงุก ุญุณุงุจ
        </button>
      </div>

      <div id="loginForm" class="auth-form active">
        <h2>ูุฑุญุจุงู ุจุนูุฏุชู!</h2>
        <p>ูุณุนุฏูุง ุฑุคูุชู ูุฌุฏุฏุงู</p>
        <form id="loginFormElement">
          <div class="form-group">
            <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
            <input type="email" id="loginEmail" required autocomplete="email">
          </div>
          <div class="form-group">
            <label>ูููุฉ ุงููุฑูุฑ</label>
            <input type="password" id="loginPassword" required autocomplete="current-password">
          </div>
          <button type="submit" class="btn-primary">
            <i class="fas fa-sign-in-alt"></i> ุฏุฎูู
          </button>
        </form>
      </div>

      <div id="registerForm" class="auth-form">
        <h2>ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</h2>
        <p>ุงูุถู ุฅูู ูุฌุชูุน TeamX2</p>
        <form id="registerFormElement">
          <div class="form-group">
            <label>ุงุณู ุงููุณุชุฎุฏู</label>
            <input type="text" id="registerUsername" required minlength="3" autocomplete="username">
          </div>
          <div class="form-group">
            <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
            <input type="email" id="registerEmail" required autocomplete="email">
          </div>
          <div class="form-group">
            <label>ูููุฉ ุงููุฑูุฑ</label>
            <input type="password" id="registerPassword" required minlength="6" autocomplete="new-password">
          </div>
          <button type="submit" class="btn-primary">
            <i class="fas fa-user-plus"></i> ุชุณุฌูู
          </button>
        </form>
      </div>
    </div>
  </div>

  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ</h3>
        <button class="close-modal" id="closeSettingsModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="settingsForm">
        <div class="user-preview" style="display: flex; flex-direction: column; align-items: center; margin-bottom: 20px;">
          <img src="assets/default-avatar.svg" class="member-avatar" style="width: 80px; height: 80px; margin-bottom: 10px; border: 3px solid var(--brand-primary);" onerror="this.src='assets/default-avatar.svg'">
          <span style="font-size: 12px; color: var(--text-muted);">ูุนุงููุฉ ุงูุตูุฑุฉ</span>
        </div>
        <div class="form-group">
          <label>ุงุณู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ</label>
          <input type="text" id="settingsUsername" required>
        </div>
        
        <div class="form-group">
            <label>ููู ุงูุงุณู ุงููููุฒ</label>
            <select id="settingsNameColor" style="width: 100%; padding: 12px; background: var(--bg-primary); border: 2px solid var(--border-color); color: var(--text-primary); border-radius: 8px; font-family: 'Cairo', sans-serif;">
                <option value="default">ุงูุชุฑุงุถู (ุฃุจูุถ)</option>
                <option value="rainbow">๐ ููุณ ูุฒุญ ูุชุญุฑู</option>
                <option value="red">๐ฅ ุฃุญูุฑ ูุชููุฌ</option>
                <option value="blue">๐ ุฃุฒุฑู ูููู</option>
                <option value="gold">๐ ุฐูุจู ูุงุฎุฑ</option>
                <option value="green">๐ฝ ุฃุฎุถุฑ ููุฑ</option>
            </select>
        </div>

        <div class="form-group">
          <label>ุฑุงุจุท ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ (URL)</label>
          <div style="display: flex; gap: 10px; align-items: center;">
            <input type="text" id="settingsAvatar" placeholder="https://..." style="flex: 1;">
            <button type="button" class="btn-primary" id="uploadAvatarBtn" style="width: auto; padding: 10px;">
              <i class="fas fa-upload"></i>
            </button>
            <input type="file" id="avatarFileInput" style="display: none;" accept="image/*">
          </div>
        </div>
        
        <div class="form-group" id="adminTools" style="display: none;">
          <label style="color: var(--danger);">ุฃุฏูุงุช ุงูุฅุฏุงุฑุฉ</label>
          <button type="button" class="btn-primary" id="deleteAllMsgsBtn" style="background: var(--danger); margin-top: 5px;">
            <i class="fas fa-trash-alt"></i> ุญุฐู ุฌููุน ุงูุฑุณุงุฆู
          </button>
        </div>
        
        <div class="modal-actions" style="display: flex; gap: 10px; margin-top: 20px;">
            <button type="button" class="btn-primary" id="logoutBtn" style="background: var(--danger);">
                <i class="fas fa-sign-out-alt"></i> ุชุณุฌูู ุฎุฑูุฌ
            </button>
            <button type="submit" class="btn-primary">
                <i class="fas fa-save"></i> ุญูุธ ุงูุชุบููุฑุงุช
            </button>
        </div>
      </form>
    </div>
  </div>

  <div id="app" class="app" style="display: none;">
    
    <aside class="channels-sidebar">
      <div class="server-header">
        <h3 id="serverName">TeamX2 Chat</h3>
        <button class="dropdown-toggle">
          <i class="fas fa-chevron-down"></i>
        </button>
      </div>
      
      <div class="channels-list" id="channelsList">
        <div class="channel-category" data-category="general">
          <div class="category-header">
            <div class="category-info">
              <i class="fas fa-chevron-down"></i>
              <span>ูููุงุช ูุตูุฉ</span>
            </div>
            <button class="add-channel-btn" data-type="text" title="ุฅุถุงูุฉ ููุงุฉ ูุตูุฉ">
              <i class="fas fa-plus"></i>
            </button>
          </div>
          <div class="category-channels" id="textChannelsList">
            <!-- Text channels will be rendered here -->
          </div>
        </div>

        <div class="channel-category" data-category="voice">
          <div class="category-header">
            <div class="category-info">
              <i class="fas fa-chevron-down"></i>
              <span>ูููุงุช ุตูุชูุฉ</span>
            </div>
            <button class="add-channel-btn" data-type="voice" title="ุฅุถุงูุฉ ููุงุฉ ุตูุชูุฉ">
              <i class="fas fa-plus"></i>
            </button>
          </div>
          <div class="category-channels" id="voiceChannelsList">
            <!-- Voice channels will be rendered here -->
          </div>
        </div>
      </div>

      <div class="user-section">
        <div class="user-info">
          <img src="assets/default-avatar.svg" alt="Avatar" class="user-avatar" id="userAvatar" onerror="this.src='assets/default-avatar.svg'">
          <div class="user-details">
            <span class="username" id="currentUsername">ุงููุณุชุฎุฏู</span>
            <span class="user-status" id="currentStatus">ูุชุตู</span>
          </div>
        </div>
        <div class="user-controls">
          <button class="control-btn" id="muteBtn" title="ูุชู ุงูุตูุช">
            <i class="fas fa-microphone"></i>
          </button>
          <button class="control-btn" id="deafenBtn" title="ูุชู ุงูุณูุงุนุงุช">
            <i class="fas fa-headphones"></i>
          </button>
          <button class="control-btn" id="settingsBtn" title="ุงูุฅุนุฏุงุฏุงุช">
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </div>
    </aside>

    <main class="chat-area">
      <header class="chat-header">
        <button class="header-btn mobile-only" id="mobileMenuBtn" style="display: none;">
          <i class="fas fa-bars"></i>
        </button>
        <div class="channel-info">
          <i class="fas fa-hashtag channel-icon"></i>
          <h2 id="currentChannelName">ุนุงู</h2>
          <button id="clearMessagesBtn" class="header-btn" title="ูุณุญ ุงูุดุงุดุฉ" style="margin-right: 10px; font-size: 14px; opacity: 0.7;">
            <i class="fas fa-eraser"></i>
          </button>
        </div>
        <div class="header-actions">
          <button class="header-btn" title="ุจุญุซ">
            <i class="fas fa-search"></i>
          </button>
          <button class="header-btn" id="toggleMembersBtn" title="ุงูุฃุนุถุงุก">
            <i class="fas fa-users"></i>
          </button>
        </div>
      </header>

      <div class="chat-messages" id="chatMessages">
        <div class="welcome-message">
          <i class="fas fa-hashtag"></i>
          <h3>ูุฑุญุจุงู ุจู ูู #<span id="welcomeChannelName">ุนุงู</span></h3>
          <p>ูุฐู ุจุฏุงูุฉ ููุงุฉ #<span id="welcomeChannelName2">ุนุงู</span></p>
        </div>
      </div>

      <div class="typing-indicator" id="typingIndicator" style="display: none;">
        <div class="typing-dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <span class="typing-text"></span>
      </div>

      <div class="message-input-container">
        <button class="input-btn" id="attachBtn" title="ุฅุฑูุงู ููู">
          <i class="fas fa-plus"></i>
        </button>
        <button class="input-btn" id="voiceBtn" title="ุฑุณุงูุฉ ุตูุชูุฉ">
          <i class="fas fa-microphone"></i>
        </button>
        <div class="message-input-wrapper">
          <textarea id="messageInput" placeholder="ุฃุฑุณู ุฑุณุงูุฉ ุฅูู #ุนุงู" rows="1"></textarea>
          <div class="input-actions">
            <button class="input-btn" id="emojiBtn" title="ุงุฎุชุฑ ุฅูููุฌู">
              <i class="far fa-smile"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="emoji-picker" id="emojiPicker" style="display: none;">
        <div class="emoji-header">
          <div class="emoji-tabs">
            <button class="emoji-tab active" data-category="all" title="ุงููู"><i class="fas fa-globe"></i></button>
            <button class="emoji-tab" data-category="smileys" title="ูุฌูู"><i class="far fa-smile"></i></button>
            <button class="emoji-tab" data-category="animals" title="ุญููุงูุงุช ููุจุงุชุงุช"><i class="fas fa-leaf"></i></button>
            <button class="emoji-tab" data-category="food" title="ุทุนุงู"><i class="fas fa-pizza-slice"></i></button>
            <button class="emoji-tab" data-category="activities" title="ุฃูุดุทุฉ"><i class="fas fa-basketball-ball"></i></button>
            <button class="emoji-tab" data-category="objects" title="ุฃุดูุงุก"><i class="fas fa-lightbulb"></i></button>
          </div>
          <div class="emoji-search-container">
            <input type="text" id="emojiSearch" placeholder="ุจุญุซ ุนู ุฅูููุฌู...">
            <i class="fas fa-search"></i>
          </div>
        </div>
        <div class="emoji-grid" id="emojiGrid">
          </div>
      </div>
    </main>

    <aside class="members-sidebar" id="membersSidebar">
      <div class="members-header">
        <h3>ุงูุฃุนุถุงุก</h3>
      </div>
      <div class="members-list" id="membersList">
        <div class="member-group">
          <div class="member-group-title">ูุชุตู โ <span>1</span></div>
          <div class="member" id="currentUserMember">
            <img src="assets/default-avatar.svg" alt="Avatar" class="member-avatar">
            <div class="member-info">
              <span class="member-name">ุงููุณุชุฎุฏู</span>
              <span class="member-status online">ูุชุตู</span>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <div id="uploadModal" class="modal">
    <div class="modal-content upload-modal">
      <div class="modal-header">
        <h3>ุฑูุน ููู</h3>
        <button class="close-modal" id="closeUploadModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="upload-area" id="uploadArea">
        <i class="fas fa-cloud-upload-alt"></i>
        <p>ุงุณุญุจ ูุฃููุช ุงูููู ููุง</p>
        <p>ุฃู</p>
        <button class="btn-primary" id="selectFileBtn">ุงุฎุชุฑ ููู</button>
        <input type="file" id="fileInput" style="display: none;">
        <p class="upload-hint">ุงูุญุฏ ุงูุฃูุตู:  10 ููุฌุงุจุงูุช</p>
      </div>
      <div class="file-preview" id="filePreview" style="display: none;">
        <div class="preview-info">
          <i class="file-icon"></i>
          <div class="file-details">
            <span class="file-name"></span>
            <span class="file-size"></span>
          </div>
          <button class="remove-file" id="removeFileBtn">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="upload-progress" id="uploadProgress" style="display: none;">
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
          <span class="progress-text" id="progressText">0%</span>
        </div>
        <button class="btn-primary" id="uploadFileBtn">ุฑูุน</button>
      </div>
    </div>
  </div>

  <div id="channelModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="channelModalTitle">ุฅูุดุงุก ููุงุฉ ุฌุฏูุฏุฉ</h3>
        <button class="close-modal" id="closeChannelModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="channelForm">
        <input type="hidden" id="channelIdInput">
        <input type="hidden" id="channelTypeInput">
        <div class="form-group">
          <label>ุงุณู ุงูููุงุฉ</label>
          <input type="text" id="channelNameInput" placeholder="ุฃุฏุฎู ุงุณู ุงูููุงุฉ" required minlength="2">
        </div>
        <button type="submit" class="btn-primary" id="channelSubmitBtn">
          <i class="fas fa-plus-circle"></i> ุฅูุดุงุก ุงูููุงุฉ
        </button>
        <button type="button" class="btn-primary" id="deleteChannelBtn" style="background: var(--danger); margin-top: 10px; display: none;">
          <i class="fas fa-trash"></i> ุญุฐู ุงูููุงุฉ
        </button>
      </form>
    </div>
  </div>

  <div id="createServerModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ุฅูุดุงุก ุณูุฑูุฑ ุฌุฏูุฏ</h3>
        <button class="close-modal" id="closeCreateServerModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="createServerForm">
        <div class="form-group">
          <label>ุงุณู ุงูุณูุฑูุฑ</label>
          <input type="text" id="serverNameInput" placeholder="ุฃุฏุฎู ุงุณู ุงูุณูุฑูุฑ ุงููููุฒ" required minlength="3">
        </div>
        <div class="form-group">
          <label>ุฑุงุจุท ุงูุฃููููุฉ (ุงุฎุชูุงุฑู)</label>
          <input type="url" id="serverIconInput" placeholder="https://example.com/image.png">
        </div>
        <button type="submit" class="btn-primary">
          <i class="fas fa-plus-circle"></i> ุฅูุดุงุก ุงูุณูุฑูุฑ
        </button>
      </form>
    </div>
  </div>

  <div class="context-menu" id="contextMenu" style="display: none;">
    <div class="context-item" data-action="reply">
      <i class="fas fa-reply"></i> ุฑุฏ
    </div>
    <div class="context-item" data-action="edit">
      <i class="fas fa-edit"></i> ุชุนุฏูู
    </div>
    <div class="context-item" data-action="copy">
      <i class="fas fa-copy"></i> ูุณุฎ
    </div>
    <div class="context-item danger" data-action="delete">
      <i class="fas fa-trash"></i> ุญุฐู
    </div>
  </div>

  <div class="toast-container" id="toastContainer"></div>

  <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
  <script src="js/utils.js?v=1.2"></script>
  <script src="js/auth.js?v=1.2"></script>
  <script src="js/socket.js?v=1.2"></script>
  <script src="js/fileUpload.js?v=1.2"></script>
  <script src="js/chat.js?v=1.2"></script>
  <script src="js/app.js?v=1.2"></script>
</body>
</html>